plugins:
  datasette-dashboards:
    verify-marktstammdaten:
      title: My Dashboard
      description: Showing some nice metrics
      layout:
        - [wrong-biomass, wrong-solar]
      charts:
        wrong-biomass:
          title: Share of biomass plants that contain erroneuos data
          db: failed_tests
          query: SELECT ROUND(CAST(COUNT(DISTINCT(mastr_id)) AS FLOAT) / (SELECT number_rows FROM metadata WHERE table_name='stg_mastr__biomass') * 100, 2) as share FROM biomass
          library: metric
          display:
            field: share
            prefix:
            suffix: "%"
        wrong-solar:
          title: Share of solar plants that contain erroneuos data
          db: failed_tests
          query: SELECT ROUND(CAST(COUNT(DISTINCT(mastr_id)) AS FLOAT) / (SELECT number_rows FROM metadata WHERE table_name='stg_mastr__solar') * 100, 2) as share FROM solar
          library: metric
          display:
            field: share
            prefix:
            suffix: "%"